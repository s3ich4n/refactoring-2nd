# 8.5 인라인 코드를 함수 호출로 바꾸기

_Replace inline code with function call_

## 개요

Before

```python
applies_to_mass = False
for s in states:
    if s == "MA":
        applies_to_mass = True
```

After

```python
# 함수 정의
def state_includes(states, state_code):
    return state_code in states

# 함수 호출로 대체
applies_to_mass = state_includes(states, "MA")
```

## 배경

함수는 여러 동작을 하나로 묶어준다. 그리고 함수의 이름이 코드 동작방식 보다 목적을 말해주기 때문에, 함수를 활용하면 코드를 이해하기가 쉬워진다.
함수는 중복을 없애는데도 효과적이다. 똑같은 코드를 반복하는 대신 함수를 호출하면 된다. 이러면 동작을 수정할 때도, 함수 하나만 수정하면 된다.

이미 존재하는 함수와 똑같은 일을 하는 인라인 코드가 있다면 함수 호출로 대체하길 원할 것이다.
기존 함수의 코드를 수정해도 그 인라인 코드와 하는 게 같다면 바꾸는 편이 좋다.
기존 함수의 이름은 이번 리팩터링의 큰 힌트가 된다. 이름을 잘 지었다면 인라인 함수대신 그걸 쓰면 되고,
이름을 못 지었다면 이름을 좀 바꾸고(6.5절), 아니면 바꾸려는 함수의 목적이 인라인 코드와 다를 수도 있다.

라이브러리의 함수로 바꿀 수 있다면 더 좋다. 함수 본문을 짤 필요도 없이 간결해지니까.

## 절차

1. 인라인 코드를 함수 호출로 대체한다
2. 테스트한다

> [!NOTE]
> 
> 함수 추출하기(6.1절)와 이 리팩터링의 차이는 인라인 코드를 대체할 함수가 있는지/없는지 이다.
> 아직 함수가 없어서 새로 만들어야 한다면 함수 추출하기를,
> 이미 존재한다면 인라인 코드를 함수 호출하기(현재 리팩터링)로 리팩터링 하면 된다.

> [!NOTE]
> 
> 사용중인 프로그래밍 언어의 표준 라이브러리나 플랫폼(프레임워크, 안정적인 서드파티 라이브러리)이 제공하는 API를 잘 파악하면 이 리팩터링의 빈도가 높아질 것이다
> 보통은 내가 짠 것 보단 오픈소스 코드가 더 효율적일테니, 본인이 운용하는 언어와 플랫폼의 버전업을 평소 잘 챙겨두는 것이 중요하다.
> 라이브러리에 지나치게 의존하면 설계 유연성이 떨어지니, 이 부분도 신중히 선택해야 한다.
