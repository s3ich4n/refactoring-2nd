# 7.7 위임 숨기기

_Hide Delegate_

## 개요

Before

```python
manager = a_person.department.manager
```

After

```python
manager = a_person.manager


class Person:
    @property
    def manager(self):
        return self.department.manager
```

## 배경

모듈화 설계의 코어는 캡슐화다. 이는 모듈이 시스템의 다른 부분을 알 필요 없게 만든다.
이런 코드는 함께 고려해야할 것이 줄어들어서 코드 변경이 더 쉬워진다.

그렇기에 캡슐화는 단순히 필드만을 숨기는 것이 아니라고 하는 것이다.

예를들어 서버 객체의 필드가 가리키는 객체(_delegate_)의 메소드를 호출하려면 클라이언트는 위임객체를 알아야한다.
그런데 위임 객체의 인터페이스가 바뀌면 쓰는쪽도 다 바뀌어야 한다. 이런 의존성을 없애기 위해 서버 자체에 위임 메소드를 만들어서 위임 객체의 존재를 숨기면 된다.
이러면 위임 객체가 바뀌더라도 서버 코드만 고치면 된다. 클라이언트는 그대로 둬도 된다.

## 절차

1. 위임 객체의 각 메소드에 해당하는 위임 메소드를 서버에 생성한다
2. 클라이언트가 위임 객체 대신 서버를 호출하게 수정한다. 하나씩 바꿀 때마다 테스트한다
3. 모두 수정했다면 서버로부터 위임객체를 얻는 접근자를 제거한다
4. 테스트한다

## 예시

클라이언트에서 어떤 사람이 속한 부서의 관리자를 알고싶다고 하자.