# 7장 - 캡슐화

모듈 분리의 가장 중요한 기준은 비밀을 잘 숨기는 것.

데이터 구조는 아래 기법으로 숨길 수 있다:
- 레코드 캡슐화하기(7.1절)
- 컬렉션 캡슐화하기(7.2절)
- 기본형을 객체로 바꾸기(7.3절)

클래스에서는 임시변수 처리가 골치아픈데 이거는 임시변수를 질의로 바꾸기(7.4절)로 해결

클래스는 정보를 숨기는 용도로 설계되었으므로, 이를 위한 기법을 소개한다.
- 여러 함수를 클래스로 묶기(6.9절)
- 추출하기/인라인하기의 클래스 버전 소개
    - 클래스 추출하기(7.5절)
    - 클래스 인라인하기(7.6절)

클래스는 내부 정보 뿐 아니라 클래스간 연결관계를 숨기는 데도 유용하다.
- 위임 숨기기(7.7절)
- 중개자 제거하기(7.8절)

클래스 뿐 아니라 함수도 구현을 캡슐화하는 개념이다. 알고리즘을 통째로 바꾸기 위해선
- 함수 추출하기(6.1절)로 알고리즘을 함수에 담고
- 알고리즘 교체하기(7.9절)을 적용

# Appendix I. 레코드가 뭐지?

데이터 중심으로 값을 담고있는 객체. 비즈니스 로직이 없고, 데이터를 담기만 한다.

데이터 레코드는 그냥 값만 담고있다가, 클래스화를 통해서 강력한 객체를 발전시킬 수 있다. 이미 6장에서 겪어봤듯.

책에서는 이런 개념들로 리팩터하기를 권한다.

1. "레코드 캡슐화하기(Encapsulate Record)" - 단순 데이터 구조를 객체로 변환하여 데이터 접근을 제어하는 방법
2. "컬렉션 캡슐화하기(Encapsulate Collection)" - 컬렉션 데이터를 직접 조작하는 대신 객체를 통해 안전하게 조작하도록 변경
3. "클래스 추출하기(Extract Class)" - 관련 데이터와 동작을 새로운 클래스로 분리
4. "함수 옮기기(Move Function)" - 로직을 적절한 도메인 객체로 이동

이러면 아래 이점을 얻을 수 있다:

- 데이터는 필요할 때만 읽고/쓰게 "캡슐화"
- 비즈니스 로직은 진짜 책임이 있는 "도메인 객체"로 이동
- 데이터 레코드는 순수 데이터 보관소로 유지하고, 로직은 도메인 모델이 책임지게
