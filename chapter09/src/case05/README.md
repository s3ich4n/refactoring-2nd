# 9.5 값을 참조로 바꾸기

_Change Value to Reference_

## 개요

Before

```python
customer = Customer(customer_data)
```

After

```python
customer = CustomerRepository.get(customer_data.id)
```

## 배경

한 데이터 구조 안에 논리적으로 같은 제 3의 데이터 구조를 참조하는 레코드가 여러 개 있을 때가 있다.
주문 목록을 읽다보면 한 고객의 여러 주문이 섞여있을 수도 있다. 이 때 고객을 값으로도, 참조로도 다룰 수 있다.
값으로 다루면 고객 데이터가 각 주문에 복사되고, 참조로 다루면 여러 주문이 단 하나의 데이터 구조를 참조하게 된다.

고객 데이터를 갱신할 일이 없다면 상관없다. 같은 데이터가 여러 벌 있더라도 안바뀌니까.

논리적으로 같은 데이터를 물리적으로 복제후 사용시 문제되는 점은, 그 값을 업데이트 할 때다.
쫓아가면서 다 바꿔줘야 하니까.
값을 참조로 바꾸면 엔티티 하나당 객체도 단 하나만 존재한다. 이를 위한 클라이언트의 접근을 관리하는 저장소(_repository_)가 필요해진다.

## 절차

1. 같은 부류에 속하는 객체들을 보관할 저장소를 만든다
2. 생성자에서 이 부류의 객체들 중 특정 객체를 정확히 찾아내는 방법이 있는지 확인한다
3. 호스트 객체의 생성자들을 수정하여 필요한 객체를 이 저장소에서 찾도록 한다. 하나 수정할 때마다 테스트한다.

## 예시
